{% block title %}
home
{% endblock %}
{% block content%}
<main class="container mt-4">
    <section id="trip-section">
        <h2 class="mb-3">Plan Your Road Trip</h2>
        <form id="trip-form" action="directions.py" method="post">
            <div class="form-group">
                <label for="start">Starting Point:</label>
                <input type="text" class="form-control" id="start" name="start" placeholder="Enter Address" required>
            </div>
            <div class="form-group">
                <label for="end">Destination:</label>
                <input type="text" class="form-control" id="end" name="end" placeholder="Enter Address" required>
            </div>
            <button type="submit" class="btn btn-primary">Plan Road Trip</button>
        </form>
        <div id="results" class="mt-4">
            <!-- Display playlist and restaurant recommendations here -->
        </div>
    </section>
</main>

<!-- Include this script in your HTML file -->
<script>
    document.getElementById('trip-form').addEventListener('submit', function(event) {
        event.preventDefault();

        const startAddress = document.getElementById('start').value;
        const endAddress = document.getElementById('end').value;

        // Make an asynchronous POST request to directions.py
        fetch('/directions.py', {
            method: 'POST',
            headers: {
                'Content-Type': 'application/x-www-form-urlencoded',
            },
            body: `start=${encodeURIComponent(startAddress)}&end=${encodeURIComponent(endAddress)}`,
        })
        .then(response => response.json())
        .then(data => {
            // Update the HTML with the received directions
            const resultsContainer = document.getElementById('results');
            resultsContainer.innerHTML = ''; // Clear previous results

            if (data.error) {
                // Handle errors
                const errorElement = document.createElement('p');
                errorElement.textContent = `Error: ${data.error}`;
                resultsContainer.appendChild(errorElement);
            } else {
                // Display directions
                data.forEach(step => {
                    const stepElement = document.createElement('div');
                    stepElement.innerHTML = `
                        <p>Step: ${step.html_instructions}</p>
                        <p>Distance: ${step.distance.text}</p>
                        <p>Duration: ${step.duration.text}</p>
                        <hr>
                    `;
                    resultsContainer.appendChild(stepElement);
                });
            }
        })
        .catch(error => {
            console.error('Error:', error);
        });
    });
</script>

{% endblock %}
